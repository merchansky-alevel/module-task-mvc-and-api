DECLARE @CurrentMigration [nvarchar](max)

IF object_id('[dbo].[__MigrationHistory]') IS NOT NULL
    SELECT @CurrentMigration =
        (SELECT TOP (1) 
        [Project1].[MigrationId] AS [MigrationId]
        FROM ( SELECT 
        [Extent1].[MigrationId] AS [MigrationId]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = N'AUdependencies.Migrations.Configuration'
        )  AS [Project1]
        ORDER BY [Project1].[MigrationId] DESC)

IF @CurrentMigration IS NULL
    SET @CurrentMigration = '0'

IF @CurrentMigration < '201809291638502_AddCompanyMigration'
BEGIN
    CREATE TABLE [dbo].[Books] (
        [Id] [int] NOT NULL IDENTITY,
        [Name] [nvarchar](max),
        [Author] [nvarchar](max),
        [Price] [int] NOT NULL,
        CONSTRAINT [PK_dbo.Books] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[Purchases] (
        [PurchaseId] [int] NOT NULL IDENTITY,
        [Person] [nvarchar](max),
        [Address] [nvarchar](max),
        [BookId] [int] NOT NULL,
        [Date] [datetime] NOT NULL,
        CONSTRAINT [PK_dbo.Purchases] PRIMARY KEY ([PurchaseId])
    )
    CREATE TABLE [dbo].[Users] (
        [Id] [int] NOT NULL IDENTITY,
        [Name] [nvarchar](max),
        [Email] [nvarchar](max),
        [Address] [nvarchar](max),
        [Phone] [nvarchar](max),
        [WorkPlace] [nvarchar](max),
        CONSTRAINT [PK_dbo.Users] PRIMARY KEY ([Id])
    )
    CREATE TABLE [dbo].[__MigrationHistory] (
        [MigrationId] [nvarchar](150) NOT NULL,
        [ContextKey] [nvarchar](300) NOT NULL,
        [Model] [varbinary](max) NOT NULL,
        [ProductVersion] [nvarchar](32) NOT NULL,
        CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
    )
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201809291638502_AddCompanyMigration', N'AUdependencies.Migrations.Configuration',  0x1F8B0800000000000400ED59CD6EDB3810BE2FB0EF20E8B40BA4567E2EBB81DC22759245B04D6254497BA6A5B14D84A2B42415D8CFD6C33ED2BEC20E254AA224CB3F89930645112090469C6F86C38FC3E1F8BF6FFFFA1F1631731E41489AF0A17B3438741DE06112513E1BBA999ABEFBC3FDF0FED75FFC8B285E385FCA71277A1C6A723974E74AA5A79E27C339C4440E621A8A442653350893D82351E21D1F1EFEE91D1D7980102E62398EFF39E38AC690BFE0EB28E121A42A23EC3A89804923C72F418EEADC9018644A4218BA67F711A4C023F492821CA0AA8285729D3346097A13009BBA0EE13C5144A1AFA7F7120225123E0B52141076B74C01C74D099360E6705A0FDF763A87C77A3A5EAD584285995449BC23E0D189898FD7567F5294DD2A7E18C10B8CB45AEA59E7511CBA1F93E4C175DA864E474CE8419D00172B32D05A074EF3DB414508E48DFE3B70461953998021874C09C20E9C71366134FC1B9677C903F021CF18B3DD4307F15B4380A2B14852106AF919A6C6E9ABC875BCA69ED756ACD42C9D624A575C9D1CBBCE0D1A271306D5EA5BD30F5422E02FE0208882684C9402C13506E4F1EB586FD9D2FF4B6B4837DC3DAE734D169F80CFD47CE8E2A3EB5CD20544A5C47870CF296E36545222834D46CE32354FC48B9B190B1AC2A6D0D910BE57936C2DF5C69908E744ABEF4ABF52F33B52B074E12954B4755F8B92630C8C4E202F4DCA281220E58BDBD1096873F8D6639C63204B04FD7C47F5AEDD0FB7F19C11BBF35A6BFD4CABBDB65E25AD5EC484B21F669F8CE7097FF9987D4DC4C3989170DF96D66F375DEC118A642A639AA6B80B72A65575606707E216339B501A8BCD9915D001282BD1E032D57E1445E5A0A89BBCF5CA65A25F05509F7E1B407452580550A49855E1AA025357CE5E513A9725B6D75363FBD7244D71E5AC9ADB489CA028B847EF82DDABD0B8C0F042B9A218ADBCAD2C61962033687D45D3E8E925155261B226933C74A328EE0C5B41839E009706ED956E67C93AECE568FD6C08B7F2F25150A3855307F212E71663BECBA709952FA612EFA8E5B71EC2885891774709CB62DE97BBD7691799D4D62F24DB2394D5A78D51CAB64731C5A50D62445D0CDF6B45B0BD545E67AD5A67597BE1B7A245BD87F7408D6AD3EF4E8F7ED5DEE05A656623C2BDA5EB5A34534036908C6C07DA94E75E8337A5707B9CB2FEB3614AD9F6284505686314923743BE22F7EF8178F961B13BE956ABBDD59C644A371BC2885E9FA0A6F06AEC9642B43D865556D93896F89589DA2930DA432AEB55A1D12A287C73B86FEEEC754EFB6288EB60901E69A44FFA602915C4033D6010FCC3468CE27CEB01D784D32948555C8ADCE3C3A3E35663F0ED34E93C2923B645A7EED56F75544774E3BD6DC79BB77D91E38F441F47E2B7982C7EB79176EF813D0BAAD1E7CA67BDE72ED7776F32BDC85236FB4ACF5BCCE69DF85958CDFED0E6E55CDF1D8AF059EDBB3BF4732BF7F75DDE0C8F1AFD936721757A243BA0EDD607E9DE9337B7387A3B1CC5A98B5B6092A0E38583A627B265F3636DEF6315BCD535D9A235D2DB1959056D7A294F6C9A746B17DFB37FBBF4CF41D2590DA17FC9E410EAA2A0062DC75CF16952520467647B540E6931E81A14C14C44CE84A253122AFC1C22CFF346DB17C2B27C134D20BAE2B7994A33752625C413D668ABFADE7AFB7967A8E9B37F9BEA37B98F29A09B5427D35BFE31A32CAAFCBE5C914C7B2034BB4DFE42AF02A5F3D86C5921DD746AEC3E2013BE73735D527710A70CC1E42D0FC8233CC537A4D7279891705996A0FD209B17A21976FF9C929920B13418B53EBE2287A378F1FE7FA1A6196FC21F0000 , N'6.2.0-61023')
END

IF @CurrentMigration < '201810010820364_Eugen feature migration'
BEGIN
    CREATE TABLE [dbo].[Servers] (
        [Id] [int] NOT NULL IDENTITY,
        [Domen] [nvarchar](max),
        [Name] [nvarchar](max),
        [Type] [int] NOT NULL,
        CONSTRAINT [PK_dbo.Servers] PRIMARY KEY ([Id])
    )
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201810010820364_Eugen feature migration', N'AUdependencies.Migrations.Configuration',  0x1F8B0800000000000400ED5A5F6FDB36107F1FB0EF20E86903522B7F36600BEC16A99314C1EAC6A8D2EE9996CE8E508AD2482AB03FDB1EF691F61576342989922CD94EE4342B8A02854DDFFD783CFE78BC3BE6DFBFFF19BE59C6D479002EA2848DDC93C1B1EB000B9230628B919BC9F9ABDFDC37AF7FFC617815C64BE7732E77A6E4509389917B2F657AEE7922B8879888411C053C11C95C0E8224F6489878A7C7C7BF7B27271E20848B588E33FC983119C5B0FE825FC7090B209519A19324042ACC38FEE2AF519D0F240691920046EEC5A7105260215A198118A0AA84A5749D0B1A11B4C6073A771DC2582289445BCF3F09F0254FD8C24F7180D0BB550A283727548059C37929BEEB728E4FD572BC5231870A322193784FC09333E31FAFAEFE282FBB85FFD08357E869B952AB5E7B71E4BE4D922FAE539FE87C4CB9126A3858EFC840691D39D5DF8E0A42206FD4BF23679C5199711831C82427F4C89966331A057FC0EA2EF9026CC4324A6DF3D040FCAD328043539EA4C0E5EA23CC8DD137A1EB78553DAFAE58A8593A7A49374C9E9DBACE079C9CCC2814BB6F2DDF97098777C0801309E19448099C290C58FBAF317B6D2EF57F3E1BD20D4F8FEB4CC8F23DB085BC1FB9F8D175AEA32584F988B1E0138BF0B0A192E4196C9BE42293F7093FF834531E05B0CD7536C4D02B49D649BD69C6837BA2D4F7A55FAEF91529989BF0182ADABACF45C9293A4605904393320C390871F0795400DAEEBE6E8C4B74648EA03EDF45EAD4F6C36D1F385EA3FB335BEB7D0FADED9B96C470781A3F4B0057F0C52498A898CDD7C3FDD010D39D479050697DA7E0D725C7554C22FACD84EBE97DC20EEFB33F13FE654A49D0F74CEDC72D8B1B315F1FDF1B714DC9A2AC2C1E770F2889BE0E222E30044E57E810FBA0541D3A8178063C7727CC5CE733A1197E3E69F8BE22FA8EC46B471BE9D36EE90984112984CFBA85CD4130C2BF740BABC8250AE15F9BDBA837AC193355E1482256005DA4297A70BD55454DD9D8439CCD6CA330B4A99AA6A17D9056D282D6956432715FD7605EB7729E346E022833E92D209A569B20F284650B807170435D5F349B0E4DE1D9B28CF7741D9FD7FB5E4BC13F9C9034455A590D0033E2F8BAFA1FBFF2F72F89638DE1056243655C585BCC8477055940ED579C1A2DBD8EB890983992D9DAF7E3306E886DE0518B83F3096DAAD4EFCAD2EDB9B4FA6C18BBB113A2B955C3291D798D6BC37C4AAE9709852DA62DD0505BB76008257CC3ED3B4E6816B3B61BBC4B5BDFA7B6BE1ED91D212F856D8C7C6C771453E9DA2066A88931F46A1EAC6F95D7D8AB5A4653DFF89D685106811EA851448DFDE9D1AEDAEA5CABE6AD78B8B58EEE4433D56C05C98CED419B3CFBA9F0261FDC1D272F466D987C6C77145D8EDA187AE4C5902FBF3C7AA09EB96DF6275E9BE261229329362B7BA2879E33BAE98CD246D0232F86183A29E88116EB2C627F526C567BA9979549686D0833F4FC91CBD4659530AA8776C7B0AA2E1BC71A7E66A23632CFBA48317B9181D632CDA1C9FAB6BF3F35D2402DE23AE8A487285429A0BF1212E2811218F87FD1318D70BDA5C084B0680E42EA52CD3D3D3E39AD3D5FBD9CA7244F8890EEF09EF4EC4D9F4879746B5B67CFFEB0DDE7610F44E529FCA7982C7FB691F67FA9791254E53566BDEA9EDF62BEFA53C841B6B2FAFAF1B4CDACB6CC9E84557DC5D8BE9DDD6F18217E96FDBF617C1B87B9F26EF0A44DEB2D2CD8FDFF1E8F72331BFADF6E5A6FAEAE74D35FCCF1AF74C59F84D4E87CEF81D64DAC7A63B4D9F7DADEF36C6D79EA640923D72C41C3B581A649BA6337B4B319BA09DE6AA3EED42BED68956E822F1AAC3BF4515BDBA89B804DE3F5911DD6663E3BF4ECBFBA1A5E8288162584FA1B2C06814A144BD05CE686CD939C7FB822DBA25CA446CF094882B713B9E0329A9340E2CF011E22FBC9E02A9E4178C36E339966F242088867B4F21237F4BAE75FB791AB360F6F53F54DF4B10434335217EC2D7B9B45342CECBEDE10A95B20D4D131C111ADF2A50A928B5581F4A15177B50119F75D9A125ADE419C520413B7CC270FF018DB905EEF614182555E96B4836CDF88AADB8797115970120B8351EAE357E470182F5FFF07144C27EC7C280000 , N'6.2.0-61023')
END

IF @CurrentMigration < '201810010831304_testMigrateDB'
BEGIN
    ALTER TABLE [dbo].[Books] ADD [Year] [int] NOT NULL DEFAULT 0
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201810010831304_testMigrateDB', N'AUdependencies.Migrations.Configuration',  0x1F8B0800000000000400ED5A5F6FDB36107F1FB0EF20E86903522B7F36600BEC16A9931441EBC4A8D20E7BA4A5B32394A234920AECCFB6877DA47D851D4D4AA224CBB61C3BCD8AA24061D3773F1E8F3F1EEF8EF9F7EF7FFA6FE631751E818B286103F7A477EC3AC082248CD86CE06672FAEA37F7CDEB1F7FE85F85F1DCF99CCB9D2939D46462E03E48999E7B9E081E2026A21747014F443295BD20893D1226DEE9F1F1EFDEC9890708E12296E3F43F664C46312CBFE0D761C202486546E82809810A338EBFF84B54E796C4205212C0C0BDF814420A2C442B23103D54953097AE73412382D6F840A7AE43184B249168EBF92701BEE4099BF9290E107ABF4801E5A6840A306B382FC5B75DCEF1A95A8E572AE6504126641277043C3933FEF1EAEA3B79D92DFC871EBC424FCB855AF5D28B03F76D927C719DFA44E743CA9550C3C17A477A4AEBC8A9FE7654100279A3FE1D39C38CCA8CC380412639A147CE389BD028780F8BFBE40BB001CB28B5CD4303F1B7CA000E8D799202978B8F303546DF84AEE355F5BCBA62A166E9E825DD307976EA3AB7383999502876DF5ABE2F130EEF80012712C2319112385318B0F45F63F6DA5CEAFF7C36A41B9E1ED71991F9076033F93070F1A3EB5C477308F31163C12716E1614325C933D834C945261F127EF069C63C0A6093EBD643FC09847741E87B254DD792779CF1E08128F5AE04CE35BF228973137621B3ADFB5CA41EA36354083A34ADC3908310079F4785B0CDEE5B8F71898ECC11D4E7FB489DFBFD70DB078E177177666BBDEFC1B97DD392180E4FE367B902147C3109A63A66F3F5F07E688809D30E24545ADF29F875C9711593887E33E17AFC90B0C3FBEC8F847F195312EC7BA6F6E396C58D98AF8FEF8DB8A66456D626BBDD034A625F0711171802A70B74887D50AA0E1D413C019EBB1326AEF399D00C3F9F347C5F117D47E2A5A38DF4E97AE91184112984CFD60B9B8360847F592FAC229728847F6D6EA3DEB066CC54A5278958017491A6E8C1E556155569630F7136B38DC2D0A66A9A86F6415A490B5A5792C9C47D5DC579EB95F3A471154099496F00D1B45A0591272C1B008C831BEAFAA25975680ACF968D004F7702F28E81D7D232E88F489A22ADAC168219717CDD3F18BEF2BB17D5B1C6F002B1A2B62EAC2D66C2BB82CCA0F62B4E8D965E475C48CC1CC964E9FB611837C456F0A8C5C1F9843655EA7765E9F65C5A7D368C5DD94BD1DCAAE1948EBCC6B5613E2597CB84C216D35868A82D9B388412BEE2F61D26348B59DB0DBE4E5BDFA7B6BE1ED91E212FA66D8C7C6C7B14532BDB2066687B0C5D2CDB107AA489D0F76A7B50DF6CAFB1DBB59CA84E9DAD885586913D90AB883BDD09D6AEDABA3D56D55CD9A3D64A7C2D9AA9872B4866AC03F1F2FCA9C2BC7C707B9CBC9CB561F2B1ED5174416B63E8911743BEFCFAD903F5CC7DD59D786D8A87896DA65CADEC891E7ACEF8A873521B418FBC1862E8B4620FB458E621DD49B15AEDA55E772625B621CCD0F3472E53D955C2A81EDA1EC3AADB6C1C6BF89989DAC85DEB22C5EC450E5BCB55FB266FDCFC06D64824B588EBA0931EA3502591FE4248887B4AA0E7FF458734C2F5960223C2A22908A98B3DF7F4F8E4B4F684F6729EB33C2142BAC59BD6B3B78D22E5D18D8DA18E1D66BB53C41E89CA53F84F3199FF6C23757F2D7A1254E54568B9EA27BC076DD6EFFE1AF4D51F630E4285EAFBCBD3C8506DDA3D09ABFA8EB20B1DEC5794103FCBFDBFA27C1BC1A0F272F1A44DDB5B58B15F20F678949BD9D4FF76D3F6E6EA4A3FFFC51CFF4A5FFE49488DDE7B07B4F5C4AAB7669B9DB7CD5DD7D6A6AB4EB630724D12345C1B68DAB45BF663D7B66357C15B8DDCADBAB56B9AB5ABE08B16EF169DDCD646EE2A60D3FADDB1C7DBCC87FB9EFD9763FD4B10D1AC84507F47C620508966099ACBDCB06992F30F57645B948BD4E8390249F07622175C46531248FC39C043643F5A5CC513086FD85D26D34C5E0801F18456DE02FBDEFAF9978DECAACDFDBB547D13FB58029A19A90BF68EBDCD221A16765FAF88D42D10EAE898E08856F95205C9D9A240BA6DD46D6D40C67D97A60497F710A714C1C41DF3C923EC621BD2EB03CC48B0C8CB9A7690CD1B51757BFF3222334E6261304A7DFC8A1C0EE3F9EBFF004F82030140290000 , N'6.2.0-61023')
END

IF @CurrentMigration < '201810011417289_add_rate_field_in_book_model'
BEGIN
    ALTER TABLE [dbo].[Books] ADD [Rate] [int] NOT NULL DEFAULT 0
    INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
    VALUES (N'201810011417289_add_rate_field_in_book_model', N'AUdependencies.Migrations.Configuration',  0x1F8B0800000000000400ED5A6D6FDB3610FE3E60FF41D0A70D48ADBC6CC016D82D52271982D58D51A51DF69196CE8E508AD2442AB07FDB3EEC27ED2FEC6852122559B2E497342B8A02854DDF3D3C1E1F1EEF8EF9F7EF7F866F9621B59E20E141C446F6D9E0D4B68079911FB0C5C84EC5FCD52FF69BD7DF7F37BCF1C3A5F52993BB9072A8C9F8C87E1422BE741CEE3D4248F8200CBC24E2D15C0CBC2874881F39E7A7A7BF3A67670E20848D589635FC90321184B0FE825FC711F3201629A193C807CAF538FEE2AE51ADF724041E130F46F6D5471F62603E5A19001FA0AA80A5B0AD2B1A10B4C6053AB72DC2582488405B2F3F72704512B1851BE300A10FAB18506E4E2807BD86CB42BCEB724ECFE5729C423183F2522EA2B027E0D985F68F5355DFC9CB76EE3FF4E00D7A5AACE4AAD75E1CD96FA3E8B36D5527BA1CD3440AD51CAC766420B54EACF26F2739219037F2DF89354EA948131831484542E889354D6734F07E87D543F419D888A5949AE6A181F85B690087A649144322561F60AE8DBEF36DCB29EB3955C55CCDD0514BBA63E2E2DCB6DEE3E4644621DF7D63F9AE8812F80D182444803F254240C22406ACFD579BBD3297FC3F9B0DE986A7C7B62664F90ED8423C8E6CFC685BB7C112FC6C445BF0910578D8504924296C9BE42A158F5172F469A649E0C136D7B543FC0924D90FE1036E431F84A15310BD95FED334F11E8954EF7B0432CD2F780C321376390EA6EE731D8B293A4606B1631F0CDF4F80F3A3CF2383E076F7B5635C1BC4969F1F0219390EC36D1712BCCAFB335BE97D0BEFCD9B1685707C1A3FCB2522E1F3493059D29BAF860F43434CB97620A1D4FA46C12F4B8E9B9004F4AB09D7D3C7881DDF677F44C9E72925DEA1676A3E6E69588BF9EAF8DEF15B4A164575B3DB3D20250E751071813E2474850E310F4AD9A11308679064EE84996D7D2234C5CF6735DF97447F23E1DAD15AFABC5D7A027E4072E18B76617D10B4F04FEDC23272F15CF8E7FA36AA0DABC74C59BC9280E54057718C1E5C6F555ED7D6F61067D3DBC8356DCAA62968178491B4A075059974DC5775A0D3AE9C258D9B008A4C7A0B88A2D526882C61D902A01D5C535717CDA643937BB6682538AA9790F51C9C86A6C37042E21869653421F488E5AA0EC4F895DBBF2C0F1586E3F10DD5796E6D3E13DE156401955F716AB4F43648B8C0CC91CCD6BE1FFB614D6C038F1A1C9C4D6852A57A57166ECFA4E567CDD88DDD18C5AD0A4EE1C85B5C1BE65362BD4CC86DD1AD899ADABA0D44284936DCBEE388A6216BBAC1DBB4D57D6AEAAB91EE0859396E626463DD5174B56D82E8A1EE18AADC3621D4487704556E9B086AA48E30742ABB58A58B53E34B25ABAA92AF13358B4074007AE691AB3F459B551B37D8A8BB4BBBDC58CBB7A2E98ABA84A4C77A5037CBC04ADCCD06BBE36405B109938D7547B9AE91EFFA65912FBBC00E403D7DE3F5275E93E271A2A32E784B7BA2869E33C2AAACD64450232F86182A3139002DD6994C7F526C567BA917A64EAA4D083DF4FC914BD786A530AA86BA6318959F89630C3F33516BD96F55249F3DCF822BD9EE50679EDBDFE16AA9A812B12D74D253E0CB34D45D7101E1400A0CDCBFE89806B8DE4260425830072E54B9689F9F9E9D579EF15ECE939AC3B94F3BBCAB3D7BE329901EDDDA5AEAD9A3367B4DEC89C83C25F92124CB1F4DA4FE2F567B41955EA5D6ABDEE34D6A177DF3456ABB7EFFF7A82FFE1C74142A955F80F62353B96DB81756F92567173A98EF383E7E16877FC7F93A8249E9ED64AF4D3B585832DF400E7894EBD9D8FF76D30EE6EAD28BC28B39FEA59781BD906ADDFF1E68EDC4AA3687EBBDBFED7DDFC6B6AF4AD63072CD22345C19A81BC51D3BC2AD0DE14DF0462BB953BFB8A55DBC093E6F3277E82537B6923701EBE6F38E5DE67A3E3D74CCBF7E1B5E030F160584FC5B38069E4C540BD04CE68ECDA38C7FB822D3A24CA442CF090882B713B94A4430279EC09F3D3C44E6B3C94D3803FF8EDDA7224EC515E710CE68E93572E8B4CFBF6EA5976D1EDEC7F21B3FC412D0CC405EB0F7EC6D1A503FB7FB7643A46E809047470747B4CA1532482E5639D2FB5ADDD704A4DD77AD4B78F100614C118CDF33973CC12EB621BDDEC18278ABAC2C6A06D9BE1165B70FAF03B24848C83546A18F5F91C37EB87CFD1F5F0706AC042A0000 , N'6.2.0-61023')
END

